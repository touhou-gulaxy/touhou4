# planet scope
spth_effect_establish_barrier = {
    optimize_memory
    if = {
        limit = {
            NOT = { has_deposit = d_hakurei_barrier }
        }
        add_deposit = d_hakurei_barrier
    }
    add_modifier = {
        modifier = spth_hakurei_barrier_info
    }
	planet_event = { id = spth_colony.1 }
}

spth_effect_count_th_deposits = {
    optimize_memory
    export_trigger_value_to_variable = {
        trigger = count_deposit
        parameters = {
            limit = { is_deposit_type = $deposit$ }
        }
        variable = spth_count_deposit_$deposit$
    }
}

spth_effect_restore_th_deposits = {
    optimize_memory
    if = {
        limit = { is_variable_set = spth_count_deposit_$deposit$ }
        while = {
            count = spth_count_deposit_$deposit$
            add_deposit = $deposit$
        }
        clear_variable = spth_count_deposit_$deposit$
    }
}

spth_planet_season_effect = {
    optimize_memory
    if = {
        limit = { spth_is_$season$ = yes }
        if = {
            limit = { NOT = { has_modifier = spth_story_in_$season$ } }
            add_modifier = { modifier = spth_story_in_$season$ }
        }
        spth_planet_$season$_remove_season = yes
    }
}
spth_planet_spring_remove_season = {
    optimize_memory
    if = {
        limit = { has_modifier = spth_story_in_summer }
        remove_modifier = spth_story_in_summer
    }
    if = {
        limit = { has_modifier = spth_story_in_autumn }
        remove_modifier = spth_story_in_autumn
    }
    if = {
        limit = { has_modifier = spth_story_in_winter }
        remove_modifier = spth_story_in_winter
    }
}
spth_planet_summer_remove_season = {
    optimize_memory
    if = {
        limit = { has_modifier = spth_story_in_spring }
        remove_modifier = spth_story_in_spring
    }
    if = {
        limit = { has_modifier = spth_story_in_autumn }
        remove_modifier = spth_story_in_autumn
    }
    if = {
        limit = { has_modifier = spth_story_in_winter }
        remove_modifier = spth_story_in_winter
    }
}
spth_planet_autumn_remove_season = {
    optimize_memory
    if = {
        limit = { has_modifier = spth_story_in_summer }
        remove_modifier = spth_story_in_summer
    }
    if = {
        limit = { has_modifier = spth_story_in_spring }
        remove_modifier = spth_story_in_spring
    }
    if = {
        limit = { has_modifier = spth_story_in_winter }
        remove_modifier = spth_story_in_winter
    }
}
spth_planet_winter_remove_season = {
    optimize_memory
    if = {
        limit = { has_modifier = spth_story_in_summer }
        remove_modifier = spth_story_in_summer
    }
    if = {
        limit = { has_modifier = spth_story_in_autumn }
        remove_modifier = spth_story_in_autumn
    }
    if = {
        limit = { has_modifier = spth_story_in_spring }
        remove_modifier = spth_story_in_spring
    }
}
