spth_effect_init_container_country_effect = {
    if = {
        limit = { NOT = { exists = event_target:spth_container_country } }
        create_country = {
            name = NAME_spth_leader_country
            type = spth_country_type_container
            flag = {
				colors = {
					"black"
					"black"
					"null"
					"null"
				}
            }
			effect = {
				save_global_event_target_as = spth_container_country
			}
        }
    }
    event_target:spth_container_country = {
        if = {
            limit = { NOT = { exists = event_target:spth_container_species } }
            create_species = {
	    		name = "NAME_Unknown"
	    		class = HUM
	    		portrait = random
	    		namelist = random
	    		traits = {  }
	    		allow_negative_traits = no
	    		effect = { save_global_event_target_as = spth_container_species }
	    	}
        }
    }
}

# planet scope
SPTH_EFFECT_PLANET_UPDATE_DISPLAY_INFO = {
	log = "tetwwrgregregregrege"
	set_variable = { which = var_planet_barrier_capacity_add value = value:planet_barrier_capacity_add }
	set_variable = { which = planet_barrier_capacity_use value = value:planet_barrier_capacity_use }
	set_variable = { which = var_planet_barrier_capacity_add_1 value = modifier:planet_barrier_capacity_add }
	set_variable = { which = planet_barrier_capacity_use_2 value = modifier:planet_barrier_capacity_use }
	set_variable = { which = var_planet_barrier_capacity_add_3 value = 23213 }
	set_variable = { which = planet_barrier_capacity_use_4 value = 55533 }
	print_scope_effect = yes
}

spth_debug_trigger_lunar_capital_ruin = {
	optimize_memory
	if = {
		limit = { is_scope_type = country }
		country_event = {
			id = toho.3000
			scopes = {
				from = event_target:spth_story_sol_system_earth
				fromfrom = event_target:spth_story_sol_system_lunar_capital
			}
		}
	}
}

spth_special_project_research_moon_barrier = {
	optimize_memory
	root.owner = {
		if = {
			limit = { check_variable = { which = spth_research_moon_barrier_var value >= 160 } }
			switch = {
				trigger = has_country_flag
				spth_break_moon_barrier = {
					event_target:spth_story_sol_system_lunar_capital = {
						set_planet_entity = {
							entity = city_planet_01_entity
							graphical_culture = owner
						}
						create_ambient_object = {
							type = "spth_hakurei_city_object"
							entity_offset_height = { min = -35 max = -40 }
							location = this
						}
						last_created_ambient_object = {
							set_location = { target = prev }
						}
						add_modifier = { modifier = spth_lunar_break_barrier }
						add_modifier = { modifier = paradise_made }
					}
				}
				spth_repair_moon_barrier = {
					event_target:spth_story_sol_system_lunar_capital = {
						create_ambient_object = {
							type = "th_gensokyo_mofazhen_object"
							entity_offset_height = { min = -35 max = -40 }
							location = this
						}
						last_created_ambient_object = {
							set_location = { target = prev }
						}
						add_modifier = { modifier = spth_lunar_repair_barrier }
						add_modifier = { modifier = paradise_planet }
					}
				}
			}
			clear_variable = spth_research_moon_barrier_var
		} else = {
			enable_special_project = {
				name = spth_research_moon_barrier
				location = event_target:spth_story_sol_system_lunar_capital
				owner = this
			}
			root.fleet = {
				fleet_action_research_special_project = {
					special_project = spth_research_moon_barrier
					target = event_target:spth_story_sol_system_lunar_capital
				}
			}
		}
	}
}
