spth_settings_group_button = {
    potential = { always = yes }
    allow = { always = yes }
    effect = {}
}

spth_settings_always_on_leader_fuction_effect = {
    potential = { always = yes }
    allow = { hidden_trigger = { always = yes } }
    effect = { custom_tooltip = gensokyo_start.1145.g.tooltip }
}
spth_settings_always_on_concept_query_effect = {
    potential = { always = yes }
    allow = { hidden_trigger = { always = yes } }
    effect = { custom_tooltip = gensokyo_start.1145.h.tooltip }
}
spth_settings_sp_improved_technology_on_effect = {
    potential = { always = yes }
    allow = {
        custom_tooltip = {
            fail_text = gensokyo_start.1145.a.disable
            success_text = gensokyo_start.1145.a.enable
            has_country_flag = spth_tech_repeatable_improved_lingli_disable
        }
    }
    effect = {
        hidden_effect = { remove_country_flag = spth_tech_repeatable_improved_lingli_disable }
    }
}
spth_settings_sp_improved_technology_off_effect = {
    potential = { always = yes }
    allow = {
        custom_tooltip = {
            fail_text = gensokyo_start.1145.b.disable
            success_text = gensokyo_start.1145.b.enable
            NOT = { has_country_flag = spth_tech_repeatable_improved_lingli_disable }
        }
    }
    effect = {
        hidden_effect = { set_country_flag = spth_tech_repeatable_improved_lingli_disable }
    }
}
spth_settings_sp_improved_10_technology_on_effect = {
    potential = { always = yes }
    allow = {
        custom_tooltip = {
            fail_text = gensokyo_start.1145.c.disable
            success_text = gensokyo_start.1145.c.enable
            NOT = { has_country_flag = spth_tech_repeatable_improved_10_lingli_enable }
        }
    }
    effect = {
        hidden_effect = { set_country_flag = spth_tech_repeatable_improved_10_lingli_enable }
    }
}
spth_settings_sp_improved_10_technology_off_effect = {
    potential = { always = yes }
    allow = {
        custom_tooltip = {
            fail_text = gensokyo_start.1145.d.disable
            success_text = gensokyo_start.1145.d.enable
            has_country_flag = spth_tech_repeatable_improved_10_lingli_enable
        }
    }
    effect = {
        hidden_effect = { remove_country_flag = spth_tech_repeatable_improved_10_lingli_enable }
    }
}
spth_settings_xijian_n_technology_on_effect = {
    potential = { always = yes }
    allow = {
        custom_tooltip = {
            fail_text = gensokyo_start.1145.e.disable
            success_text = gensokyo_start.1145.e.enable
            has_country_flag = spth_tech_repeatable_xijian_n_disable
        }
    }
    effect = {
        hidden_effect = { remove_country_flag = spth_tech_repeatable_xijian_n_disable }
    }
}
spth_settings_xijian_n_technology_off_effect = {
    potential = { always = yes }
    allow = {
        custom_tooltip = {
            fail_text = gensokyo_start.1145.f.disable
            success_text = gensokyo_start.1145.f.enable
            NOT = { has_country_flag = spth_tech_repeatable_xijian_n_disable }
        }
    }
    effect = {
        hidden_effect = { set_country_flag = spth_tech_repeatable_xijian_n_disable }
    }
}

spth_settings_crisis_info = {
    potential = { always = yes }
    allow = { always = yes }
    effect = { custom_tooltip = gensokyo_start.1145.crisis.tooltip }
}
spth_settings_crisis_easy = {
    potential = { always = yes }
    allow = {
        has_origin = origin_spth_story_gensokyo
    }
    effect = {
        custom_tooltip = gensokyo_start.1145.easy.tooltip
        hidden_effect = {
            event_target:global_event_country = {
                set_variable = { which = spth_lunar_capital_crisis_difficulty value = 1 }
            }
        }
    }
}
spth_settings_crisis_normal = {
    potential = { always = yes }
    allow = {
        has_origin = origin_spth_story_gensokyo
    }
    effect = {
        custom_tooltip = gensokyo_start.1145.normal.tooltip
        hidden_effect = {
            event_target:global_event_country = {
                set_variable = { which = spth_lunar_capital_crisis_difficulty value = 2 }
            }
        }
    }
}
spth_settings_crisis_hard = {
    potential = { always = yes }
    allow = {
        has_origin = origin_spth_story_gensokyo
    }
    effect = {
        custom_tooltip = gensokyo_start.1145.hard.tooltip
        hidden_effect = {
            event_target:global_event_country = {
                set_variable = { which = spth_lunar_capital_crisis_difficulty value = 3 }
            }
        }
    }
}
spth_settings_crisis_lunatic = {
    potential = { always = yes }
    allow = {
        has_origin = origin_spth_story_gensokyo
    }
    effect = {
        custom_tooltip = gensokyo_start.1145.lunatic.tooltip
        hidden_effect = {
            event_target:global_event_country = {
                set_variable = { which = spth_lunar_capital_crisis_difficulty value = 4 }
            }
        }
    }
}
spth_settings_crisis_phantasm_on = {
    potential = { always = yes }
    allow = {
        has_origin = origin_spth_story_gensokyo
        hidden_trigger = {
            NOT = { has_global_flag = spth_lunar_capital_crisis_phantasm }
        }
    }
    effect = {
        custom_tooltip = gensokyo_start.1145.phantasm.tooltip
        set_global_flag = spth_lunar_capital_crisis_phantasm
    }
}
spth_settings_crisis_phantasm_off = {
    potential = { always = yes }
    allow = {
        has_origin = origin_spth_story_gensokyo
        hidden_trigger = {
            has_global_flag = spth_lunar_capital_crisis_phantasm
        }
    }
    effect = {
        custom_tooltip = gensokyo_start.1145.phantasm.tooltip
        remove_global_flag = spth_lunar_capital_crisis_phantasm
    }
}

# TODO: finish functions
spth_settings_refresh_data = {
    potential = { always = yes }
    allow = { hidden_trigger = { NOT = { has_country_flag = refreshing_spth_data_cooldown } } }
    effect = {
        custom_tooltip = gensokyo_start.1145.refresh_data.tooltip
        hidden_effect = {
            log = "spth refresh data"
            set_country_flag = refreshing_spth_data_cooldown
            set_update_modifiers_batch = begin
            every_owned_planet = {
                limit = {
                    OR = {
                        has_modifier = spth_planet_pop_convert
                        has_deposit = d_hakurei_barrier
                        NOT = { is_variable_set = planet_weak_genso_job_produce_faith_modifier }
                    }
                }
                if = {
                    limit = { has_deposit = d_hakurei_barrier }
                    spth_effect_refresh_barrier_and_faith = yes
                }
                if = {
                    limit = { NOT = { is_variable_set = planet_weak_genso_job_produce_faith_modifier } }
                    set_variable = { which = planet_weak_genso_job_produce_faith_modifier value = 1 }
                }
                spth_count_to_be_converted_pops = yes
                if = {
                    limit = { has_modifier = spth_planet_pop_convert }
                    remove_modifier = spth_planet_pop_convert
                    add_modifier = {
                        modifier = spth_planet_pop_convert
                        multiplier = spth_to_be_converted_pops_counter
                    }
                }
            }
            set_update_modifiers_batch = end
            remove_country_flag = refreshing_spth_data_cooldown
        }
    }
}
spth_settings_more_functions = {
    potential = { always = yes }
    allow = { always = yes }
    effect = {
        custom_tooltip = gensokyo_start.1145.more_functions.tooltip
        hidden_effect = {

        }
    }
}
spth_settings_cheat_disable = {
    potential = { NOT = { has_country_flag = enable_spth_cheat } }
    allow = { hidden_trigger = { has_country_flag = allow_enable_spth_cheat_ui } }
    effect = {
        set_country_flag = enable_spth_cheat
        remove_country_flag = allow_enable_spth_cheat_ui
    }
}
spth_settings_cheat_enable = {
    potential = { has_country_flag = enable_spth_cheat }
    allow = { always = yes }
    effect = {

    }
}
spth_settings_qq_qrcode = {
    potential = { always = yes }
    allow = { always = yes }
    effect = { country_event = { id = gensokyo_start.1146 } }
}
