###################冈格尼尔#############
# 动能专精
weapon_component_template = {
    key = "TH_weapon_gungnir1"
    entity = "invisible_turret_entity"
    icon = "GFX_th_weapon_gungnir"
    # firing_arc = 60.0
    prerequisites = { "tech_th_weapon_gungnir" }
    component_set = "th_weapon_gungnir1"
    projectile_gfx = "spth_gungnir_ballistic"
    tags = { weapon_type_kinetic weapon_type_gungnir weapon_type_lingli weapon_role_artillery }
    ai_tags = { weapon_role_artillery artillery }
    ai_tag_weight = 1100
    ship_modifier = {
        component_lifesteal_add = 1
    }
    inline_script = { script = ship_components/spth_component_basic size = extra_large }
    inline_script = { script = ship_components/spth_component_attributes name = common tag = kinetic type = extra_large }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = extra_large }
    ai_weight = {
        weight = 1100
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
weapon_component_template = {
    key = "TH_weapon_gungnir2"
    entity = "invisible_turret_entity"
    icon = "GFX_th_weapon_gungnir"
    # firing_arc = 25.0
    prerequisites = { "tech_th_weapon_gungnir" }
    component_set = "th_weapon_gungnir2"
    projectile_gfx = "spth_gungnir_ballistic"
    tags = { weapon_type_kinetic weapon_type_gungnir weapon_type_lingli }
    ai_tags = { weapon_role_artillery }
    ai_tag_weight = 1100
    ship_modifier = {
        component_lifesteal_add = 1
    }
    inline_script = { script = ship_components/spth_component_basic size = titanic }
    inline_script = { script = ship_components/spth_component_attributes name = common tag = kinetic type = titanic }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = titanic }
    ai_weight = {
        weight = 1100
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}

######################魔炮#################
# 能量专精
weapon_component_template = {
    key = "SMALL_th_weapon_spark"
    entity = "turret_missile_medium_entity"
    icon = "GFX_th_weapon_spark"
    # firing_arc = 25.0
    prerequisites = { "tech_th_weapon_spark" }
    component_set = "th_weapon_spark"
    projectile_gfx = "th_spark"
    tags = { weapon_type_energy weapon_type_lingli }
    ai_tags = { weapon_role_anti_shield }
    ai_tag_weight = 1000
    inline_script = { script = ship_components/spth_component_basic size = small }
    inline_script = { script = ship_components/spth_component_attributes name = common tag = energy type = small }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = small }
    ai_weight = {
        weight = 1000
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
weapon_component_template = {
    key = "MEDIUM_th_weapon_spark"
    entity = "turret_missile_medium_entity"
    icon = "GFX_th_weapon_spark"
    #firing_arc = 25.0
    prerequisites = { "tech_th_weapon_spark" }
    component_set = "th_weapon_spark"
    projectile_gfx = "th_spark"
    tags = { weapon_type_energy weapon_type_lingli }
    ai_tags = { weapon_role_anti_shield }
    ai_tag_weight = 1000
    inline_script = { script = ship_components/spth_component_basic size = medium }
    inline_script = { script = ship_components/spth_component_attributes name = common tag = energy type = medium }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = medium }
    ai_weight = {
        weight = 1000
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
weapon_component_template = {
    key = "LARGE_th_weapon_spark"
    entity = "turret_missile_medium_entity"
    icon = "GFX_th_weapon_spark"
    #firing_arc = 25.0
    prerequisites = { "tech_th_weapon_spark" }
    component_set = "th_weapon_spark"
    projectile_gfx = "th_spark"
    tags = { weapon_type_energy weapon_type_lingli }
    ai_tags = { weapon_role_anti_shield }
    ai_tag_weight = 1000
    inline_script = { script = ship_components/spth_component_basic size = large }
    inline_script = { script = ship_components/spth_component_attributes name = common tag = energy type = large }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = large }
    ai_weight = {
        weight = 1000
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
weapon_component_template = {
    key = "TH_weapon_spark"
    entity = "invisible_turret_entity"
    icon = "GFX_th_weapon_spark"
    # firing_arc = 60.0
    prerequisites = { "tech_th_weapon_spark_2" }
    component_set = "th_weapon_spark1"
    projectile_gfx = "th_spark"
    tags = { weapon_type_energy weapon_type_lingli weapon_role_artillery x_slot }
    ai_tags = { weapon_role_artillery artillery }
    ai_tag_weight = 1000
    ship_modifier = {
        component_lifesteal_add = 1
    }
    inline_script = { script = ship_components/spth_component_basic size = extra_large }
    inline_script = { script = ship_components/spth_component_attributes name = common tag = energy type = extra_large }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = extra_large }
    ai_weight = {
        weight = 1000
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
weapon_component_template = {
    key = "TH_weapon_spark1"
    entity = "invisible_turret_entity"
    icon = "GFX_th_weapon_spark"
    # firing_arc = 25.0
    prerequisites = { "tech_th_weapon_spark_2" }
    component_set = "th_weapon_spark1"
    projectile_gfx = "th_spark"
    tags = { weapon_type_energy weapon_type_lingli }
    ai_tags = { weapon_role_artillery }
    ai_tag_weight = 1000
    ship_modifier = {
        component_lifesteal_add = 1
    }
    inline_script = { script = ship_components/spth_component_basic size = titanic }
    inline_script = { script = ship_components/spth_component_attributes name = common tag = energy type = titanic }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = titanic }
    ai_weight = {
        weight = 1000
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}

####################梦想封印#################
# 能量专精
weapon_component_template = {
    key = "SMALL_th_weapon_muso"
    entity = "turret_missile_medium_entity"
    icon = "GFX_th_weapon_muso"
    # firing_arc = 25.0
    prerequisites = { "tech_th_weapon_muso" }
    component_set = "th_weapon_muso"
    projectile_gfx = "spth_reimu_fantasia_3_ballistic"
    tags = { weapon_type_energy weapon_type_lingli }
    ai_tags = { weapon_role_anti_shield }
    ai_tag_weight = 997
    inline_script = { script = ship_components/spth_component_basic size = small }
    inline_script = { script = ship_components/spth_component_attributes name = common tag = energy type = small }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = small }
    ai_weight = {
        weight = 997
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
weapon_component_template = {
    key = "MEDIUM_th_weapon_muso"
    entity = "turret_missile_medium_entity"
    icon = "GFX_th_weapon_muso"
    # firing_arc = 25.0
    prerequisites = { "tech_th_weapon_muso" }
    component_set = "th_weapon_muso"
    projectile_gfx = "spth_reimu_fantasia_4_ballistic"
    tags = { weapon_type_energy weapon_type_lingli }
    ai_tags = { weapon_role_anti_shield }
    ai_tag_weight = 998
    inline_script = { script = ship_components/spth_component_basic size = medium }
    inline_script = { script = ship_components/spth_component_attributes name = common tag = energy type = medium }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = medium }
    ai_weight = {
        weight = 998
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
weapon_component_template = {
    key = "LARGE_th_weapon_muso"
    entity = "turret_missile_medium_entity"
    icon = "GFX_th_weapon_muso"
    # firing_arc = 25.0
    prerequisites = { "tech_th_weapon_muso" }
    component_set = "th_weapon_muso"
    projectile_gfx = "spth_reimu_fantasia_1_ballistic"
    tags = { weapon_type_energy weapon_type_lingli }
    ai_tags = { weapon_role_anti_shield }
    ai_tag_weight = 999
    inline_script = { script = ship_components/spth_component_basic size = large }
    inline_script = { script = ship_components/spth_component_attributes name = common tag = energy type = large }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = large }
    ai_weight = {
        weight = 999
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
# 下面两个为0.5双穿同时ai任务反护盾反装甲
weapon_component_template = {
    key = "MEDIUM_th_weapon_ex_muso"
    entity = "turret_missile_medium_entity"
    icon = "GFX_th_weapon_muso"
    # firing_arc = 25.0
    prerequisites = { "tech_th_weapon_muso_2" }
    component_set = "th_weapon_ex_muso"
    projectile_gfx = "spth_reimu_fantasia_3_ballistic"
    tags = { weapon_type_energy weapon_type_lingli }
    ai_tags = { weapon_role_anti_shield weapon_role_anti_armor }
    ai_tag_weight = 999
    inline_script = { script = ship_components/spth_component_basic size = medium }
    inline_script = { script = ship_components/spth_component_attributes name = special tag = muso type = medium }
    inline_script = { script = ship_components/spth_component_resources class = special size = weapon type = medium }

    ai_weight = {
        weight = 999
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
weapon_component_template = {
    key = "LARGE_th_weapon_ex_muso"
    entity = "turret_missile_medium_entity"
    icon = "GFX_th_weapon_muso"
    # firing_arc = 25.0
    prerequisites = { "tech_th_weapon_muso_2" }
    component_set = "th_weapon_ex_muso"
    projectile_gfx = "spth_reimu_fantasia_2_ballistic"
    tags = { weapon_type_energy weapon_type_lingli }
    ai_tags = { weapon_role_anti_shield weapon_role_anti_armor }
    ai_tag_weight = 999
    inline_script = { script = ship_components/spth_component_basic size = large }
    inline_script = { script = ship_components/spth_component_attributes name = special tag = muso type = large }
    inline_script = { script = ship_components/spth_component_resources class = special size = weapon type = large }
    ai_weight = {
        weight = 999
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}

#####魔法书########
weapon_component_template = {
    key = "p_th_weapon_mofashu"
    icon = "GFX_th_weapon_mofashu"
    # firing_arc = 25.0
    # min_range = 5.0
    damage = { min = 15 max = 25 }
    windup = { min = 5 max = 6 }
    total_fire_time = 5
    range = 60
    accuracy = 0.8
    tracking = 0.7
    shield_damage = 1
    armor_damage = 1
    hull_damage = 1
    power = -30
    prerequisites = { "tech_th_weapon_mofashu" }
    component_set = "th_weapon_mofashu"
    projectile_gfx = "spth_losing_hometown_red_laser_ballistic"
    tags = { weapon_type_point_defense weapon_type_energy weapon_type_lingli }
    ai_tags = { weapon_role_point_defense }
    point_defence_targets = { "missile" "strike_craft" }
    ai_tag_weight = 999
    inline_script = { script = ship_components/spth_component_all size = point_defence type = point_defence use_ship_kill_target = yes }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = point_defence }
    ai_weight = {
        weight = 999
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}

######天之御柱
# 双穿随机性伤害
weapon_component_template = {
    key = "th_weapon_yuzhu"
    icon = "GFX_th_weapon_yuzhu"
    # firing_arc = 25.0
    prerequisites = { "tech_th_weapon_yuzhu" }
    component_set = "th_weapon_yuzhu"
    projectile_gfx = "spth_yuzhu_ballistic"
    tags = { weapon_type_kinetic weapon_type_lingli weapon_role_artillery x_slot }
    ai_tags = { weapon_role_artillery artillery }
    ai_tag_weight = 0
    inline_script = { script = ship_components/spth_component_basic size = extra_large }
    inline_script = { script = ship_components/spth_component_attributes name = special tag = yuzhu type = extra_large }
    inline_script = { script = ship_components/spth_component_resources class = yuzhu size = weapon type = extra_large }
    ai_weight = {
        weight = 0
    }
}
# 反大船
weapon_component_template = {
    key = "th_weapon_yuzhu_sp"
    icon = "GFX_th_weapon_yuzhu"
    should_ai_use = no
    firing_arc = 35.0
    prerequisites = { "tech_th_weapon_yuzhu" }
    component_set = "th_weapon_yuzhu_sp"
    projectile_gfx = "spth_yuzhu_ballistic"
    size_damage_factor = @spth_titanic_yuzhu_size_damage_factor
    tags = { weapon_type_kinetic weapon_type_energy weapon_type_lingli t_slot weapon_role_artillery }
    ai_tags = { weapon_role_anti_hull }
    ai_tag_weight = 0
    inline_script = { script = ship_components/spth_component_all size = titanic type = instant use_ship_kill_target = no }
    inline_script = { script = ship_components/spth_component_attributes name = special tag = yuzhu type = titanic }
    inline_script = { script = ship_components/spth_component_resources class = yuzhu size = weapon type = titanic }
    ai_weight = {
        weight = 0
    }
}
# 秒杀炮
weapon_component_template = {
    key = "th_weapon_yuzhu_ultra"
    icon = "GFX_th_weapon_yuzhu"
    firing_arc = 10.0
    ship_limit = 1
    # (15 + 63985) / 10 = 6400
    # final time should be: 8
    # fire rate modifier: 800
    ship_modifier = {
        custom_tooltip = th_weapon_yuzhu_ultra_tooltip
        weapon_type_spth_yuzhu_weapon_damage_mult = 1000000000000000000
        weapon_type_spth_yuzhu_weapon_fire_rate_mult = 800
    }
    prerequisites = { "tech_th_weapon_yuzhu" }
    component_set = "th_weapon_yuzhu_ultra"
    projectile_gfx = "spth_superlaser"
    tags = { weapon_type_spth_yuzhu t_slot }
    ai_tags = { weapon_role_anti_hull }
    size_restriction = {
        # titan
        # cosmo_crisis_titan
        TH_super_carrier
        spth_makai_ship_core_1
        # spth_ur_didact_flagship
        # spth_cr_assault_carrier
        # spth_cr_dreadnought
    }
    ai_tag_weight = 0
    inline_script = { script = ship_components/spth_component_basic size = titanic }
    inline_script = { script = ship_components/spth_component_attributes name = instant_kill tag = yuzhu type = titanic }
    inline_script = { script = ship_components/spth_component_resources class = instant_kill size = weapon type = titanic }
    ai_weight = {
        weight = 0
    }
}

#####贤者之石
# 能量专精
weapon_component_template = {
    key = "LARGE_th_weapon_xianzhe"
    size = large
    entity = "turret_missile_medium_entity"

    icon = "GFX_th_weapon_xianzhe"
    icon_frame = 1
    type = instant

    # firing_arc = 25.0
    min_range = 0
    static_rotation = yes
    use_ship_kill_target = yes

    damage = { min = 514 max = 514 }
    windup = { min = 10 max = 30 }
    total_fire_time = 20
    range = 250.0
    accuracy = 1.0
    tracking = 0.5
    armor_penetration = 1.0
    shield_damage = 3.0
    power = -60

    prerequisites = { "tech_th_weapon_xianzhe" }
    component_set = "th_weapon_xianzhe"
    projectile_gfx = "spth_linear_modeling_laser_ballistic"
    tags = { weapon_type_energy weapon_type_xianzhe weapon_type_lingli }
    ai_tags = { weapon_role_anti_shield }
    ai_tag_weight = 1000
    resources = {
        category = ship_components
        cost = {
            alloys = 50
            sr_fuka = 7
        }
        upkeep = {
            energy = 1.4
            sr_lingli = 0.07
        }
    }

    ai_weight = {
        weight = 1000
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
weapon_component_template = {
    key = "MEDIUM_th_weapon_xianzhe"
    size = medium
    entity = "turret_missile_medium_entity"

    icon = "GFX_th_weapon_xianzhe"
    icon_frame = 1
    type = instant

    # firing_arc = 25.0
    min_range = 0
    static_rotation = yes
    use_ship_kill_target = yes

    damage = { min = 390 max = 390 }
    windup = { min = 10 max = 30 }
    total_fire_time = 20
    range = 200.0
    accuracy = 1.0
    tracking = 0.5
    armor_penetration = 1.0
    shield_damage = 2.5
    power = -30

    prerequisites = { "tech_th_weapon_xianzhe" }
    component_set = "th_weapon_xianzhe"
    projectile_gfx = "spth_linear_modeling_laser_ballistic"
    tags = { weapon_type_energy weapon_type_xianzhe weapon_type_lingli }
    ai_tags = { weapon_role_anti_shield }
    ai_tag_weight = 1000
    resources = {
        category = ship_components
        cost = {
            alloys = 25
            sr_fuka = 3.5
        }
        upkeep = {
            energy = 0.7
            sr_lingli = 0.03
        }
    }

    ai_weight = {
        weight = 1000
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
weapon_component_template = {
    key = "SMALL_th_weapon_xianzhe"
    size = small
    entity = "turret_missile_medium_entity"

    icon = "GFX_th_weapon_xianzhe"
    icon_frame = 1
    type = instant

    # firing_arc = 25.0
    min_range = 0
    static_rotation = yes
    use_ship_kill_target = yes

    damage = { min = 195 max = 195 }
    windup = { min = 10 max = 30 }
    total_fire_time = 20
    range = 150.0
    accuracy = 1.0
    tracking = 0.5
    armor_penetration = 1
    shield_damage = 2.0
    power = -15

    prerequisites = { "tech_th_weapon_xianzhe" }
    component_set = "th_weapon_xianzhe"
    projectile_gfx = "spth_linear_modeling_laser_ballistic"
    tags = { weapon_type_energy weapon_type_xianzhe weapon_type_lingli }
    ai_tags = { weapon_role_anti_shield }
    ai_tag_weight = 1000
    resources = {
        category = ship_components
        cost = {
            alloys = 10
            sr_fuka = 1
        }
        upkeep = {
            energy = 0.2
            sr_lingli = 0.01
        }
    }

    ai_weight = {
        weight = 1000
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}

#女仆飞刀
# 动能专精
weapon_component_template = {
    key = "LARGE_th_weapon_knife"
    size = large
    entity = "turret_missile_medium_entity"

    icon = "GFX_th_weapon_knife"
    icon_frame = 1
    type = instant

    # firing_arc = 25.0
    min_range = 0
    static_rotation = yes
    use_ship_kill_target = yes

    damage = { min = 514 max = 514 }
    windup = { min = 10 max = 30 }
    total_fire_time = 20
    range = 250.0
    accuracy = 1
    tracking = 0.5
    armor_damage = 3.0
    shield_penetration = 1.0
    power = -60

    prerequisites = { "tech_th_weapon_knife" }
    component_set = "th_weapon_knife"
    projectile_gfx = "swarmer_missiles"
    tags = { weapon_type_kinetic weapon_type_knife weapon_type_lingli }
    ai_tags = { weapon_role_anti_armor }
    ai_tag_weight = 998
    resources = {
        category = ship_components
        cost = {
            alloys = 160
            sr_fuka = 2
        }
        upkeep = {
            energy = 1
        }
    }

    ai_weight = {
        weight = 998
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
weapon_component_template = {
    key = "MEDIUM_th_weapon_knife"
    size = medium
    entity = "turret_missile_medium_entity"

    icon = "GFX_th_weapon_knife"
    icon_frame = 1
    type = instant

    # firing_arc = 25.0
    min_range = 0
    static_rotation = yes
    use_ship_kill_target = yes

    damage = { min = 390 max = 390 }
    windup = { min = 10 max = 30 }
    total_fire_time = 20
    range = 200.0
    accuracy = 1
    tracking = 0.5
    armor_damage = 2.5
    shield_penetration = 1.0
    power = -30

    prerequisites = { "tech_th_weapon_knife" }
    component_set = "th_weapon_knife"
    projectile_gfx = "swarmer_missiles"
    tags = { weapon_type_kinetic weapon_type_knife weapon_type_lingli }
    ai_tags = { weapon_role_anti_armor }
    ai_tag_weight = 998
    resources = {
        category = ship_components
        cost = {
            alloys = 80
            sr_fuka = 1
        }
        upkeep = {
            energy = 0.5
        }
    }

    ai_weight = {
        weight = 998
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
weapon_component_template = {
    key = "SMALL_th_weapon_knife"
    size = small
    entity = "turret_missile_medium_entity"

    icon = "GFX_th_weapon_knife"
    icon_frame = 1
    type = instant

    # firing_arc = 25.0
    min_range = 0
    static_rotation = yes
    use_ship_kill_target = yes

    damage = { min = 195 max = 195 }
    windup = { min = 10 max = 30 }
    total_fire_time = 20
    range = 140.0
    accuracy = 1
    tracking = 0.5
    armor_damage = 2.0
    shield_penetration = 1.0
    power = -15

    prerequisites = { "tech_th_weapon_knife" }
    component_set = "th_weapon_knife"
    projectile_gfx = "swarmer_missiles"
    tags = { weapon_type_kinetic weapon_type_knife weapon_type_lingli }
    ai_tags = { weapon_role_anti_armor }
    ai_tag_weight = 998
    resources = {
        category = ship_components
        cost = {
            alloys = 18
            sr_fuka = 0.5
        }
        upkeep = {
            energy = 0.2
        }
    }

    ai_weight = {
        weight = 998
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}

#泄矢铁轮
# 动能专精
weapon_component_template = {
    key = "LARGE_th_weapon_xieshi"
    entity = "turret_missile_medium_entity"
    icon = "GFX_th_weapon_xieshi"
    # firing_arc = 25.0
    # min_range = 10
    prerequisites = { "tech_th_weapon_xieshi" }
    component_set = "th_weapon_xieshi"
    projectile_gfx = "spth_zfz_cyclet_ballistic"
    tags = { weapon_type_kinetic weapon_type_lingli }
    ai_tags = { weapon_role_anti_armor }
    ai_tag_weight = 998
    inline_script = { script = ship_components/spth_component_basic size = large }
    inline_script = { script = ship_components/spth_component_attributes name = common tag = kinetic type = large }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = small }
    ai_weight = {
        weight = 998
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
weapon_component_template = {
    key = "MEDIUM_th_weapon_xieshi"
    entity = "turret_missile_medium_entity"
    icon = "GFX_th_weapon_xieshi"
    # firing_arc = 25.0
    # min_range = 10
    prerequisites = { "tech_th_weapon_xieshi" }
    component_set = "th_weapon_xieshi"
    projectile_gfx = "spth_zfz_cyclet_ballistic"
    tags = { weapon_type_kinetic weapon_type_lingli }
    ai_tags = { weapon_role_anti_armor }
    ai_tag_weight = 998
    inline_script = { script = ship_components/spth_component_basic size = medium }
    inline_script = { script = ship_components/spth_component_attributes name = common tag = kinetic type = medium }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = medium }
    ai_weight = {
        weight = 998
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
weapon_component_template = {
    key = "SMALL_th_weapon_xieshi"
    entity = "turret_missile_medium_entity"
    icon = "GFX_th_weapon_xieshi"
    # firing_arc = 25.0
    # min_range = 0
    prerequisites = { "tech_th_weapon_xieshi" }
    component_set = "th_weapon_xieshi"
    projectile_gfx = "spth_zfz_cyclet_ballistic"
    tags = { weapon_type_kinetic weapon_type_lingli }
    ai_tags = { weapon_role_anti_armor }
    ai_tag_weight = 998
    inline_script = { script = ship_components/spth_component_basic size = small }
    inline_script = { script = ship_components/spth_component_attributes name = common tag = kinetic type = small }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = large }
    ai_weight = {
        weight = 998
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}

#御币
# 双穿 反装甲反护盾
weapon_component_template = {
    key = "LARGE_th_weapon_sanae"
    entity = "turret_missile_medium_entity"
    icon = "GFX_th_weapon_sanae"
    # firing_arc = 25.0
    prerequisites = { "tech_th_weapon_sanae" }
    component_set = "th_weapon_sanae"
    projectile_gfx = "spth_barrage_star_ballistic"
    tags = { weapon_type_kinetic weapon_type_lingli }
    ai_tags = { weapon_role_anti_shield weapon_role_anti_armor }
    ai_tag_weight = 1000
    inline_script = { script = ship_components/spth_component_basic size = large }
    inline_script = { script = ship_components/spth_component_attributes name = special tag = sanae type = large }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = large }
    ai_weight = {
        weight = 1000
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
weapon_component_template = {
    key = "MEDIUM_th_weapon_sanae"
    entity = "turret_missile_medium_entity"
    icon = "GFX_th_weapon_sanae"
    # firing_arc = 25.0
    prerequisites = { "tech_th_weapon_sanae" }
    component_set = "th_weapon_sanae"
    projectile_gfx = "spth_barrage_star_ballistic"
    tags = { weapon_type_kinetic weapon_type_lingli }
    ai_tags = { weapon_role_anti_armor weapon_role_anti_shield }
    ai_tag_weight = 1000
    inline_script = { script = ship_components/spth_component_basic size = medium }
    inline_script = { script = ship_components/spth_component_attributes name = special tag = sanae type = medium }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = medium }
    ai_weight = {
        weight = 1000
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
weapon_component_template = {
    key = "SMALL_th_weapon_sanae"
    entity = "turret_missile_medium_entity"
    icon = "GFX_th_weapon_sanae"
    prerequisites = { "tech_th_weapon_sanae" }
    component_set = "th_weapon_sanae"
    projectile_gfx = "spth_barrage_star_ballistic"
    tags = { weapon_type_kinetic weapon_type_lingli }
    ai_tags = { weapon_role_anti_shield weapon_role_anti_armor }
    ai_tag_weight = 1000
    inline_script = { script = ship_components/spth_component_basic size = small }
    inline_script = { script = ship_components/spth_component_attributes name = special tag = sanae type = small }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = small }
    ai_weight = {
        weight = 1000
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}

##########楼观剑系#######
# 动能专精 反船体
weapon_component_template = {
    key = "th_weapon_loukanken_1"
    entity = "turret_missile_medium_entity"
    icon = "GFX_th_ship_part_louguan"
    prerequisites = { tech_th_weapon_loukanken }
    component_set = "th_weapon_loukanken"
    projectile_gfx = "spth_kometubu_bullet_ballistic"
    tags = { weapon_type_kinetic weapon_type_lingli }
    ai_tags = { weapon_role_anti_hull }
    ai_tag_weight = 1000
    inline_script = { script = ship_components/spth_component_basic size = small }
    inline_script = { script = ship_components/spth_component_attributes name = special tag = loukanken type = small }
    inline_script = { script = ship_components/spth_component_resources class = loukan size = weapon type = small }
    ai_weight = {
        weight = 1000
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}

#######神隐############
weapon_component_template = {
    key = "KAMIKAKUSHI"
    power = -9000
    windup = {
        min = 180
        max = 270
    }
    total_fire_time = 60
    accuracy = 1
    damage = {
        min = 0
        max = 0
    }
    range = 0
    inline_script = { script = ship_components/spth_component_all size = planet_killer type = planet_killer use_ship_kill_target = yes }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = planet_killer }
    prerequisites = { "tech_colossus" tech_kamikakushi }
    icon = "GFX_th_ship_part_kamikakushi"
    size_restriction = {
        colossus
        spth_ur_didact_flagship
    }
    component_set = "KAMIKAKUSHI"
    planet_destruction_gfx = "neutron_planet_gfx"
    ai_weight = {
        factor = 30
    }
}

weapon_component_template = {
    key = "spth_story_weapon_laevatain"
    icon = "GFX_th_weapon_laevatain"
    missile_speed = 60
    missile_evasion = 0.2
    missile_shield = 300
    missile_armor = 300
    missile_health = 514
    missile_retarget_range = 50
    size_damage_factor = @spth_laevatain_size_damage_factor
    inline_script = { script = ship_components/spth_component_all size = torpedo type = missile use_ship_kill_target = no }
    inline_script = { script = ship_components/spth_component_attributes name = common tag = story type = torpedo }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = torpedo }
    prerequisites = { tech_spth_weapon_laevatain }
    component_set = "spth_story_weapon_laevatain"
    class_restriction = { shipclass_military shipclass_starbase shipclass_military_special shipclass_military shipclass_military_station }
    projectile_gfx = "spth_laevatain_missile"
    tags = {
        weapon_type_energy
        weapon_type_kinetic
        weapon_type_lingli
        g_slot
    }
    valid_for_country = {
        has_authority = auth_gensokyo
        has_origin = origin_spth_story_gensokyo
    }
    ai_tags = { weapon_role_anti_hull }
    ai_weight = {
        weight = 1280
        modifier = {
            factor = 0
            NOT = {
                has_authority = auth_gensokyo
                has_origin = origin_spth_story_gensokyo
            }
        }
    }
}
weapon_component_template = {
    key = "spth_weapon_laevatain"
    icon = "GFX_th_weapon_laevatain"
    missile_speed = 60
    missile_evasion = 0.2
    missile_shield = 240
    missile_armor = 240
    missile_health = 495
    missile_retarget_range = 50
    size_damage_factor = @spth_laevatain_size_damage_factor
    inline_script = { script = ship_components/spth_component_all size = torpedo type = missile use_ship_kill_target = no }
    inline_script = { script = ship_components/spth_component_attributes name = common tag = non_story type = torpedo }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = torpedo }
    prerequisites = { tech_spth_weapon_laevatain }
    component_set = "spth_weapon_laevatain"
    class_restriction = { shipclass_military shipclass_starbase shipclass_military_special shipclass_military shipclass_military_station shipclass_science_ship }
    projectile_gfx = "spth_laevatain_missile"
    tags = {
        weapon_type_explosive
        weapon_type_kinetic
        weapon_type_lingli
        g_slot
    }
    valid_for_country = {
        has_authority = auth_gensokyo
        NOT = { has_origin = origin_spth_story_gensokyo }
    }
    ai_tags = { weapon_role_anti_hull }
    ai_weight = {
        weight = 1280
        modifier = {
            factor = 0
            NOT = { has_authority = auth_gensokyo }
        }
        modifier = {
            factor = 0
            has_origin = origin_spth_story_gensokyo
        }
    }
}

# 返魂蝶
weapon_component_template = {
    key = "LARGE_th_yuyuko_butterfly"
    icon = "GFX_ship_part_spth_yuyuko_van"
    prerequisites = { "tech_th_ship_part_yuyuko" }
    component_set = "th_yuyuko_butterfly"
    projectile_gfx = "spth_pink_3_butterfly_ballistic"
    size_damage_factor = @spth_yuyuko_butterfly_damage_factor_1
    tags = { weapon_type_energy weapon_type_lingli weapon_type_resurrection_butterfly }
    ai_tags = { weapon_role_anti_shield weapon_role_anti_armor }
    ai_tag_weight = 1000
    ship_modifier = {
        custom_tooltip = th_yuyuko_butterfly_tt
        show_only_custom_tooltip = no
        ship_spth_yuyuko_fan_weapon_count = 3
        ship_spth_yuyuko_fan_display = 1
        ship_spth_yuyuko_fan_weapon_max = 12
    }
    inline_script = { script = ship_components/spth_component_basic size = large }
    inline_script = { script = ship_components/spth_component_attributes name = special tag = yuyuko_fan type = large }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = large }
    ai_weight = {
        weight = 1000
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
weapon_component_template = {
    key = "MEDIUM_th_yuyuko_butterfly"
    icon = "GFX_ship_part_spth_yuyuko_van"
    prerequisites = { "tech_th_ship_part_yuyuko" }
    component_set = "th_yuyuko_butterfly"
    projectile_gfx = "spth_blue_3_butterfly_ballistic"
    size_damage_factor = @spth_yuyuko_butterfly_damage_factor_1
    tags = { weapon_type_energy weapon_type_lingli weapon_type_resurrection_butterfly }
    ai_tags = { weapon_role_anti_shield weapon_role_anti_armor }
    ai_tag_weight = 1000
    ship_modifier = {
        custom_tooltip = th_yuyuko_butterfly_tt
        show_only_custom_tooltip = no
        ship_spth_yuyuko_fan_weapon_count = 2
        ship_spth_yuyuko_fan_display = 1
        ship_spth_yuyuko_fan_weapon_max = 12
    }
    inline_script = { script = ship_components/spth_component_basic size = medium }
    inline_script = { script = ship_components/spth_component_attributes name = special tag = yuyuko_fan type = medium }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = medium }
    ai_weight = {
        weight = 1000
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
weapon_component_template = {
    key = "SMALL_th_yuyuko_butterfly"
    icon = "GFX_ship_part_spth_yuyuko_van"
    prerequisites = { "tech_th_ship_part_yuyuko" }
    component_set = "th_yuyuko_butterfly"
    projectile_gfx = "spth_orange_3_butterfly_ballistic"
    size_damage_factor = @spth_yuyuko_butterfly_damage_factor_1
    tags = { weapon_type_energy weapon_type_lingli weapon_type_resurrection_butterfly }
    ai_tags = { weapon_role_anti_shield weapon_role_anti_armor }
    ai_tag_weight = 1000
    ship_modifier = {
        custom_tooltip = th_yuyuko_butterfly_tt
        show_only_custom_tooltip = no
        ship_spth_yuyuko_fan_weapon_count = 1
        ship_spth_yuyuko_fan_display = 1
        ship_spth_yuyuko_fan_weapon_max = 12
    }
    inline_script = { script = ship_components/spth_component_basic size = small }
    inline_script = { script = ship_components/spth_component_attributes name = special tag = yuyuko_fan type = small }
    inline_script = { script = ship_components/spth_component_resources class = common size = weapon type = small }
    ai_weight = {
        weight = 1000
        modifier = {
            factor = 0.0
            has_monthly_income = { resource = sr_fuka value <= 0 }
        }
    }
}
