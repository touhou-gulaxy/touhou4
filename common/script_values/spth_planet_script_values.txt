# planet scope
planet_genso_job_buff_modifier = {
	base = 1
	add = modifier:planet_barrier_capacity_add
	subtract = modifier:planet_barrier_capacity_use
	min = 0
	max = 1
}
spth_police_station_factor = {
	base = 0
	add = trigger:num_pops
	multiply = value:planet_genso_job_buff_modifier
	min = 0
}
# 人口组装速度倍率
# (1+0.10*(岗位/sqrt(人口)))*(1+0.1*龙神像启用数量)
planet_genso_cloner_modifier = {
	base = 0
	modifier = {
		free_jobs > 0
		add = trigger:free_jobs
	}
	divide = value:planet_genso_cloner_divider
	multiply = 0.10
	add = 1
	modifier = {
		OR = {
			free_jobs <= 3
			free_housing <= 6
		}
		multiply = 0
	}
	multiply = value:planet_genso_cloner_buf
	multiply = value:planet_genso_job_buff_modifier
	min = 0
	max = 8
}
planet_genso_cloner_divider = {
	base = 1
	add = trigger:num_pops
	square_root = yes
}
# 同类型建筑加成
planet_genso_cloner_buf = {
	base = 0
	complex_trigger_modifier = {
		trigger = num_buildings
		parameters = { type = building_spth_cloner disabled = no }
		multiplier = 0.10
		mode = add
	}
	add = 1
	min = 0
}
# 士兵岗位统计
planet_genso_soldier_counter = {
	base = 0
	complex_trigger_modifier = {
		trigger = num_assigned_jobs
		parameters = {
			job = soldier
		}
		mode = add
	}
	complex_trigger_modifier = {
		trigger = num_assigned_jobs
		parameters = {
			job = genso_enforcer
		}
		mode = add
	}
	multiply = value:planet_genso_job_buff_modifier
	min = 0
}

# 研究中心加成
# [2, 3.2]*ceil(sqrt(人口数)*(1+结界承载力使用/max(1, 结界承载力))*结界承载力人口buff)
# 均为planet scope
planet_genso_research_buff_capacity_add_factor = {
	base = 0
	add = modifier:planet_barrier_capacity_add
	min = 1
}
planet_genso_research_buff_capacity_factor = {
	base = 0
	add = modifier:planet_barrier_capacity_use
	divide = value:planet_genso_research_buff_capacity_add_factor
	add = 1
}
planet_genso_research_buff_building_factor = {
	base = 1
	complex_trigger_modifier = {
		trigger = num_buildings
		parameters = {
			type = building_spth_research_base_1
		}
		mode = add
	}
	max = 5.76
}
planet_genso_research_buff_modifier = {
	base = 0
	add = trigger:num_pops
	multiply = value:planet_genso_research_buff_building_factor
	square_root = yes
	multiply = value:planet_genso_research_buff_capacity_factor
	multiply = value:planet_genso_job_buff_modifier
	ceiling = yes
	multiply = 2.4
	min = 1
}
