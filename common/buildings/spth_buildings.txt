building_spth_cloner = {
	base_buildtime = 360
	can_build = yes
	category = pop_assembly
	icon = building_artist_patron
	potential = {
		owner = {
			has_authority = auth_gensokyo
		}
		OR = {
			owner = { is_ai = no }
			AND = {
				owner = { is_ai = yes }
				num_buildings = {
					type = building_spth_cloner
					value < 1
				}
			}
		}
	}
	
	resources = {
		category = planet_buildings
		cost = {
			minerals = 600
		}
		cost = {
			trigger = {
				owner = { is_ai = no }
			}
			sr_lingli = 100
		}
		upkeep = {
			energy = 2
		}
	}
	
	triggered_planet_modifier = {
		modifier = {
			planet_barrier_capacity_use = 1
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_ai = no
				is_regular_empire = yes
                has_authority = auth_gensokyo
			}
		}
		modifier = {
			planet_pop_assembly_organic_add = 4
		}
		mult = planet.value:planet_genso_job_buff_modifier
	}
}
building_spth_construction_bureau = {
	base_buildtime = 360
	can_build = yes
	category = government
	icon = building_chamber_of_elevation_1
	potential = {
		owner = {
			has_authority = auth_gensokyo
		}
		owner = { is_ai = no }
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 600
		}
		cost = {
			trigger = {
				owner = { is_ai = no }
			}
			sr_lingli = 50
		}
		upkeep = {
			energy = 2
		}
	}

	triggered_planet_modifier = {
		modifier = {
			planet_barrier_capacity_use = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_ai = no
				is_regular_empire = yes
				has_authority = auth_gensokyo
			}
		}
		modifier = {
			job_genso_construction_worker_add = 1
		}
	}
}

building_spth_entertainment_forum = {
	base_buildtime = 360
	can_build = yes
	category = amenity
	icon = building_commercial_forum
	potential = {
		owner = {
			has_authority = auth_gensokyo
		}
		owner = { is_ai = no }
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 600
		}
		cost = {
			trigger = {
				owner = { is_ai = no }
			}
			sr_lingli = 50
		}
		upkeep = {
			energy = 2
		}
	}

	triggered_planet_modifier = {
		modifier = {
			planet_barrier_capacity_use = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_ai = no
				is_regular_empire = yes
				has_authority = auth_gensokyo
			}
		}
		modifier = {
			job_genso_entertainer_add = 1
		}
	}
}

building_spth_clinic = {
	base_buildtime = 360
	can_build = yes
	category = amenity
	icon = building_ancient_relics
	potential = {
		owner = {
			has_authority = auth_gensokyo
		}
		owner = { is_ai = no }
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 600
		}
		cost = {
			trigger = {
				owner = { is_ai = no }
			}
			sr_lingli = 50
		}
		upkeep = {
			energy = 2
		}
	}

	triggered_planet_modifier = {
		modifier = {
			planet_barrier_capacity_use = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_ai = no
				is_regular_empire = yes
				has_authority = auth_gensokyo
			}
		}
		modifier = {
			job_genso_healthcare_add = 1
		}
	}
}

building_spth_police_station = {
	base_buildtime = 360
	can_build = yes
	category = government
	icon = building_military_academy
	potential = {
		owner = {
			has_authority = auth_gensokyo
		}
		owner = { is_ai = no }
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 600
		}
		cost = {
			trigger = {
				owner = { is_ai = no }
			}
			sr_lingli = 50
		}
		upkeep = {
			energy = 2
		}
	}

	triggered_planet_modifier = {
		modifier = {
			planet_barrier_capacity_use = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_ai = no
				is_regular_empire = yes
				has_authority = auth_gensokyo
			}
		}
		modifier = {
			job_genso_enforcer_add = 1
		}
	}
}

building_spth_stronghold = {
	base_buildtime = 360
	can_build = yes
	category = army
	icon = holding_park_ranger_lodge
	potential = {
		owner = {
			has_authority = auth_gensokyo
		}
		owner = { is_ai = no }
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 600
		}
		cost = {
			trigger = {
				owner = { is_ai = no }
			}
			sr_lingli = 50
		}
		upkeep = {
			energy = 2
		}
	}

	triggered_planet_modifier = {
		modifier = {
			planet_barrier_capacity_use = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				is_ai = no
				is_regular_empire = yes
				has_authority = auth_gensokyo
			}
		}
		modifier = {
			job_genso_soldier_add = 1
		}
	}
}

building_spth_barrier_manager = {
	base_buildtime = @b4_time
	capital = no
	can_build = yes
	can_demolish = no
	can_be_ruined = no
	can_be_disabled = no
	position_priority = 1
	icon = building_imperial_capital
	category = government

	potential = {
		exists = owner
		owner = {
			has_authority = auth_gensokyo
		}
		owner = { is_ai = no }
	}

	allow = {
		num_pops >= 60
		NOT = { has_building = building_spth_barrier_manager }
	}

	planet_modifier = {
		planet_housing_add = 20
		planet_amenities_add = 20
		planet_jobs_produces_mult = 0.1
		planet_barrier_capacity_use = 0.5
		planet_barrier_capacity_add = 1.0
		job_miko_add = 1
		job_miko_per_pop = 0.02
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			is_capital = yes
		}
		modifier = {
			job_miko_add = 1
			planet_jobs_produces_mult = 0.25
			planet_barrier_capacity_add = 1.0
			job_miko_per_pop = 0.005
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			OR = {
				is_planet_class = pc_ringworld_th
				is_planet_class = pc_gensokyo_city
				is_planet_class = pc_gensokyo_planet
			}
		}
		modifier = {
			job_miko_add = 1
			planet_jobs_produces_mult = 0.1
			planet_barrier_capacity_add = 0.5
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = 1200
		}
		cost = {
			trigger = {
				owner = { is_ai = no }
			}
			sr_lingli = 495
		}
		upkeep = {
			energy = 10
			sr_lingli = 4
			sr_fuka = 2
		}
	}
}

building_spth_kamikakushi_planet_terraformer = {
	base_buildtime = 1440
	can_build = yes
	can_be_ruined = no
	can_be_disabled = no
	position_priority = 1
	icon = building_gaiaseeders_4
	category = army
	potential = {
		exists = owner
		owner = {
			has_authority = auth_gensokyo
			is_ai = no
		}
		is_planet_class = pc_kamikakushi_planet
	}
	allow = {
		exists = owner
		owner = {
			has_authority = auth_gensokyo
			is_ai = no
		}
		is_planet_class = pc_kamikakushi_planet
	}
	planet_modifier = {
		planet_housing_add = 20
		planet_amenities_add = 20
		pc_kamikakushi_planet_habitability = 10
		job_soldier_add = 5
	}
	resources = {
		category = planet_buildings
		cost = {
			minerals = 1200
			sr_lingli = 495
		}
		upkeep = {
			energy = 10
			sr_lingli = 4
			sr_fuka = 2
		}
	}
}
building_spth_torifune_shirne = {
	base_buildtime = 0
	can_build = no
	can_be_ruined = no
	can_be_disabled = no
	can_demolish = no
	position_priority = 1
	icon = building_bl
	category = government
	planet_modifier = {
		planet_housing_add = 10
		planet_amenities_add = 10
		planet_barrier_capacity_use = 1
		planet_barrier_capacity_add = 0.5
	}
	triggered_planet_modifier = {
		job_miko_add = 2
		planet_housing_add = 30
		planet_amenities_add = 30
		# 完成遗址
		potential = {
			has_deposit = d_spth_torifune_control_centre
		}
	}
	country_modifier = {
		ship_speed_mult = 0.1
		all_technology_research_speed = 0.1
		ship_evasion_add = 1.5
	}
	triggered_country_modifier = {
		ship_speed_mult = 0.1
		ship_windup_mult = -0.2
		ship_evasion_add = 1.5
		# 发现遗址
		potential = { has_planet_flag = has_unlock_torifune_arc }
	}
	triggered_country_modifier = {
		all_technology_research_speed = 0.15
		ship_jumpdrive_cooldown_mult = -0.2
		ship_ftl_jumpdrive_range_mult = 1.0
		# 完成遗址
		potential = { has_deposit = d_spth_torifune_control_centre }
	}
	resources = {
		category = planet_jobs
		cost = {
			minerals = 1
			sr_lingli = 1
		}
		produces = {
			society_research = 4
			consumer_goods = 4
			multiplier = trigger:num_pops
		}
		produces = {
			consumer_goods = 1
			society_research = 4
			multiplier = trigger:num_pops
			# 完成遗址
			trigger = { has_deposit = d_spth_torifune_control_centre }
		}
		produces = {
			society_research = 8
			consumer_goods = 8
			multiplier = trigger:num_pops
			trigger = {
				owner = { has_ascension_perk = ap_toho4 }
			}
		}
		upkeep = {
			sr_lingli = 8
			multiplier = trigger:num_pops
		}
	}
}
