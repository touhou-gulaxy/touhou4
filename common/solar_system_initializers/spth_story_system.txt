spth_story_lunar_capital_outpost = {
    class = sc_spth_lunar_outpost
    usage = misc_system_init
    name = NAME_spth_story_lunar_outpost_system
    max_instances = 1
    spawn_chance = 9999
    flags = {
        spth_story_crisis_home
        spth_story_crisis_outpost
        ag_no_jump_in_system
        cannot_be_hit_by_aow_starfall_spear
        kuat_cannot_be_hit_by_starkillerbase
        ag_no_star_killer_target_system
    }
    planet = {
        class = pc_spth_void
        orbit_distance = 0
        orbit_angle = 0
        size = 1
        init_effect = { prevent_anomaly = yes set_planet_entity = { entity = spth_empty_planet } }
    }
    planet = {
        name = NAME_spth_story_lunar_outpost_planet
        class = "pc_gaia"
        orbit_distance = 0
        orbit_angle = 0
        size = 86
        has_ring = no
        flags = { spth_story_crisis_outpost_base }
        init_effect = {
            prevent_anomaly = yes
            create_species = {
                name = NAME_spth_lunar_capital_sp
                class = "THSC"
                can_generate_leaders = yes
                portrait = this
                pops_can_reproduce = yes
                name_list = touhouchs
                traits = {
                    trait = trait_touhou
                    trait = trait_spth_moon_human
                    trait = trait_spth_moon_rabbit
                }
                extra_trait_points = 4
                gender = female
                immortal = yes
                effect = {
                    save_global_event_target_as = spth_lunar_capital_species
                }
            }
            # 创建国家
            create_country = {
                name = NAME_spth_story_lunar_outpost
                species = event_target:spth_lunar_capital_species
                name_list = touhouchs
                type = spth_crisis_lunar_outpost
                flag = {
                    icon = {
                        category = "touhousp"
                        file = "flag_th4.dds"
                    }
                    background = {
                        category = "backgrounds"
                        file = "00_solid.dds"
                    }
                    colors = {
                        "white"
                        "black"
                        "black"
                        "null"
                    }
                }
                ignore_initial_colony_error = yes
                authority = auth_imperial
                civics = {
                    civic = civic_lethargic_leadership
                    civic = civic_empire_in_decline
                }
                origin = "origin_fallen_empire"
                ethos = { ethic = ethic_fanatic_spiritualist }
                effect = {
                    add_global_ship_design = "NAME_Cleanser"
                    add_global_ship_design = "NAME_Eternal"
                    add_global_ship_design = "NAME_Avatar"
                    add_global_ship_design = "NAME_Zealot"
                    add_global_ship_design = "NAME_Penitent"
                    add_global_ship_design = "NAME_Faith"
                    add_global_ship_design = "NAME_Pilgrim"
                    add_global_ship_design = "NAME_FE_Starbase"
                    save_global_event_target_as = spth_story_lunar_outpost_country
                    set_country_flag = protected_from_queen_storm
                    set_country_flag = spth_story_lunar_outpost
                    set_graphical_culture = strg_01
                    add_modifier = { modifier = spth_lunar_capital days = -1 }
                    add_resource = {
                        minerals = 1000000
                        energy = 1000000
                        food = 1000000
                        influence = 1000000
                        alloys = 1000000
                        consumer_goods = 1000000
                        sr_dark_matter = 1000000
                        sr_living_metal = 100000
                        sr_zro = 1000000
                        sr_fuka = 1000000
                        sr_lingli = 1000000
                    }
                }
            }
            set_owner = event_target:spth_story_lunar_outpost_country
            add_building = building_spth_planet_shirne
            add_building = building_spth_housing
            add_building = building_spth_housing
            add_building = building_spth_lunar_databank
            add_building = building_spth_research_base_2
            add_building = building_spth_research_base_1
            add_building = building_spth_common_foundry
            add_building = building_spth_common_factory
            add_building = building_fe_administration_2
            add_building = building_dimensional_fabricator
            while = { count = 16 create_pop = { species = owner_main_species } }
            while = { count = 30 add_district = district_spth_sp_produce }
            while = { count = 30 add_district = district_city }
        }
    }
    asteroid_belt = {
        type = rocky_asteroid_belt
        radius = 360
    }
    change_orbit = 360
    planet = {
        name = NAME_spth_story_asteroid_0
        class = "pc_asteroid"
        orbit_distance = 0
        orbit_angle = 0
        size = 6
        has_ring = no
        init_effect = {
            set_planet_flag = spth_story_crisis_outpost_defence_fleet
            add_deposit = d_minerals_10
            random_list = {
                10 = { add_deposit = d_minerals_1 }
                10 = { add_deposit = d_minerals_3 }
                10 = { add_deposit = d_minerals_5 }
                10 = { add_deposit = d_minerals_7 }
                5 = { add_deposit = d_minerals_9 }
                5 = { add_deposit = d_minerals_10 }
            }
        }
    }
    planet = {
        name = NAME_spth_story_asteroid_1
        class = "pc_rare_crystal_asteroid"
        orbit_distance = 0
        orbit_angle = 120
        size = 6
        has_ring = no
        init_effect = {
            set_planet_flag = spth_story_crisis_outpost_defence_fleet
            add_deposit = d_energy_10
            random_list = {
                10 = { add_deposit = d_energy_1 }
                10 = { add_deposit = d_energy_3 }
                10 = { add_deposit = d_energy_5 }
                10 = { add_deposit = d_energy_7 }
                5 = { add_deposit = d_energy_9 }
                5 = { add_deposit = d_energy_10 }
            }
        }
    }
    planet = {
        name = NAME_spth_story_asteroid_2
        class = "pc_crystal_asteroid"
        orbit_distance = 0
        orbit_angle = 240
        size = 6
        has_ring = no
        init_effect = {
            set_planet_flag = spth_story_crisis_outpost_defence_fleet
            add_deposit = d_dark_matter_deposit_10
            random_list = {
                10 = { add_deposit = d_dark_matter_deposit_1 }
                10 = { add_deposit = d_dark_matter_deposit_2 }
                10 = { add_deposit = d_dark_matter_deposit_3 }
                10 = { add_deposit = d_dark_matter_deposit_10 }
            }
        }
    }
    init_effect = {
        save_global_event_target_as = spth_story_lunar_outpost
        create_starbase = {
            size = "starbase_citadel"
            owner = event_target:spth_story_lunar_outpost_country
            module = "shipyard"
            module = "gun_battery"
            module = "gun_battery"
            module = "gun_battery"
            module = "gun_battery"
            module = "gun_battery"
            building = "toho_yards"
            building = "toho_yards"
            building = "colossus_yards"
            building = "titan_yards"
        }
        spth_story_lunar_outpost_home_fleets = yes
    }
}
spth_story_lunar_minigalaxynary_rim_1 = {
    class = sc_spth_minigalaxynary
    usage = misc_system_init
    name = NAME_spth_story_lunar_outpost_rim_1
    max_instances = 1
    spawn_chance = 9999
    flags = {
        spth_story_crisis_outpost
        ag_no_jump_in_system
        cannot_be_hit_by_aow_starfall_spear
        kuat_cannot_be_hit_by_starkillerbase
        ag_no_star_killer_target_system
    }
    asteroid_belt = {
        type = rocky_asteroid_belt
        radius = 75
    }
    planet = {
        class = pc_a_star
        name = "NAME_spth_story_lunar_planet_a"
        orbit_distance = 0
        orbit_angle = 0
        size = 25

        planet = {
            class = pc_gas_giant
            size = 15
            orbit_distance = 25
            orbit_angle = random

            moon = {
                class = "rl_no_atmosphere_planets"
                size = { min = 6 max = 25 }
                orbit_distance = 10
                init_effect = {
                    add_modifier = {
                        modifier = "terraforming_candidate"
                        days = -1
                    }
                }
            }
        }

        planet = {
            class = pc_gaia
            orbit_angle = 160
            orbit_distance = 20
            size = { min = 20 max = 25 }
            has_ring = no
            modifiers = none
            deposit_blockers = none

            moon = {
                class = "rl_habitable_normal"
                size = { min = 6 max = 25 }
                orbit_distance = 15
            }
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_b"
        size = 20
        orbit_distance = 210
        orbit_angle = random

        planet = {
            class = "rl_habitable_normal"
            size = { min = 6 max = 25 }
            orbit_distance = 30
            orbit_angle = random
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_c"
        size = 40
        orbit_distance = -30
        orbit_angle = 120

        planet = {
            class = pc_gas_giant
            size = 30
            orbit_distance = 60

            moon = {
                class = "rl_no_atmosphere_planets"
                size = { min = 6 max = 25 }
                orbit_distance = 20
                init_effect = {
                    add_modifier = {
                        modifier = "terraforming_candidate"
                        days = -1
                    }
                }
            }
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_d"
        size = 36
        orbit_distance = 0
        orbit_angle = 90

        planet = {
            class = "rl_habitable_normal"
            orbit_distance = 60
            size = { min = 6 max = 25 }
            orbit_angle = 45
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_e"
        size = 24
        orbit_distance = 40
        orbit_angle = 200

        planet = {
            class = pc_gas_giant
            size = 34
            orbit_distance = 40

        }

        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_angle = random
            orbit_distance = 30
            init_effect = {
                add_modifier = {
                    modifier = "terraforming_candidate"
                    days = -1
                }
            }
        }

        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_angle = random
            orbit_distance = 30

            moon = {
                class = "rl_no_atmosphere_planets"
                size = { min = 6 max = 25 }
                orbit_distance = 10
            }
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_f"
        size = 28
        orbit_distance = 20
        orbit_angle = 120

        planet = {
            class = "rl_habitable_normal"
            size = { min = 6 max = 25 }
            orbit_distance = 30
            orbit_angle = random
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_g"
        size = 20
        orbit_distance = 20
        orbit_angle = 120

        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 30
            orbit_angle = random
        }
        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 25
            orbit_angle = random
            init_effect = {
                add_modifier = {
                    modifier = "terraforming_candidate"
                    days = -1
                }
            }
        }
        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 20
            orbit_angle = random
        }
        planet = {
            class = pc_gas_giant
            size = 36
            orbit_distance = 25
            orbit_angle = random
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_h"
        size = 30
        orbit_distance = 60
        orbit_angle = 170

        planet = {
            class = "rl_habitable_normal"
            size = { min = 6 max = 25 }
            orbit_distance = 25
            orbit_angle = random
            modifiers = none
        }
        planet = {
            class = pc_gas_giant
            size = 40
            orbit_distance = 25
            orbit_angle = random
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_i"
        size = 20
        orbit_distance = 30
        orbit_angle = 50

        planet = {
            class = "rl_habitable_normal"
            size = { min = 6 max = 25 }
            orbit_distance = 40
            orbit_angle = random

            moon = {
                class = "rl_no_atmosphere_planets"
                size = { min = 6 max = 25 }
                orbit_distance = 15
                init_effect = {
                    add_modifier = {
                        modifier = "terraforming_candidate"
                        days = -1
                    }
                }
            }
        }
        planet = {
            class = pc_gas_giant
            size = 32
            orbit_distance = 40
            orbit_angle = random

            moon = {
                class = "rl_no_atmosphere_planets"
                size = { min = 6 max = 25 }
                orbit_distance = 25
            }
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_j"
        size = 30
        orbit_distance = 10
        orbit_angle = 40

        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 25
            orbit_angle = random
            modifiers = none
            init_effect = {
                add_modifier = {
                    modifier = "terraforming_candidate"
                    days = -1
                }
            }
        }
        planet = {
            class = pc_gas_giant
            size = 34
            orbit_distance = 25
            orbit_angle = random
        }
        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 30
            orbit_angle = random
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_k"
        size = 20
        orbit_distance = -60
        orbit_angle = 50

        planet = {
            class = pc_gas_giant
            size = 18
            orbit_distance = 30

            moon = {
                class = "rl_no_atmosphere_planets"
                size = { min = 6 max = 25 }
                orbit_distance = 15
                init_effect = {
                    add_modifier = {
                        modifier = "terraforming_candidate"
                        days = -1
                    }
                }
            }
        }
        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 35
            orbit_angle = random
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_l"
        size = 30
        orbit_distance = 30
        orbit_angle = 100

        planet = {
            class = "rl_habitable_normal"
            size = { min = 6 max = 25 }
            orbit_distance = 50
            orbit_angle = 60
            modifiers = none
        }
        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 20
            orbit_angle = 60
            modifiers = none
        }
    }
    init_effect = {
        save_global_event_target_as = spth_story_lunar_outpost_last
        create_starbase = {
            size = "starbase_citadel"
            owner = event_target:spth_story_lunar_outpost_country
            module = "shipyard"
            module = "gun_battery"
            module = "gun_battery"
            module = "gun_battery"
            module = "gun_battery"
            module = "gun_battery"
            building = "toho_yards"
            building = "toho_yards"
            building = "colossus_yards"
            building = "titan_yards"
        }
    }
}
spth_story_lunar_minigalaxynary_rim_2 = {
    class = sc_spth_minigalaxynary
    usage = misc_system_init
    name = NAME_spth_story_lunar_outpost_rim_2
    max_instances = 1
    spawn_chance = 9999
    flags = {
        spth_story_crisis_outpost
        ag_no_jump_in_system
        cannot_be_hit_by_aow_starfall_spear
        kuat_cannot_be_hit_by_starkillerbase
        ag_no_star_killer_target_system
    }
    asteroid_belt = {
        type = rocky_asteroid_belt
        radius = 75
    }
    planet = {
        class = pc_a_star
        name = "NAME_spth_story_lunar_planet_a_1"
        orbit_distance = 0
        orbit_angle = 0
        size = 25

        planet = {
            class = pc_gas_giant
            size = 15
            orbit_distance = 25
            orbit_angle = random

            moon = {
                class = "rl_no_atmosphere_planets"
                size = { min = 6 max = 25 }
                orbit_distance = 10
                init_effect = {
                    add_modifier = {
                        modifier = "terraforming_candidate"
                        days = -1
                    }
                }
            }
        }

        planet = {
            class = pc_gaia
            orbit_angle = 160
            orbit_distance = 20
            size = { min = 20 max = 25 }
            has_ring = no
            modifiers = none
            deposit_blockers = none

            moon = {
                class = "rl_habitable_normal"
                size = { min = 6 max = 25 }
                orbit_distance = 15
            }
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_b_1"
        size = 20
        orbit_distance = 210
        orbit_angle = random

        planet = {
            class = "rl_habitable_normal"
            size = { min = 6 max = 25 }
            orbit_distance = 30
            orbit_angle = random
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_c_1"
        size = 40
        orbit_distance = -30
        orbit_angle = 120

        planet = {
            class = pc_gas_giant
            size = 30
            orbit_distance = 60

            moon = {
                class = "rl_no_atmosphere_planets"
                size = { min = 6 max = 25 }
                orbit_distance = 20
                init_effect = {
                    add_modifier = {
                        modifier = "terraforming_candidate"
                        days = -1
                    }
                }
            }
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_d_1"
        size = 36
        orbit_distance = 0
        orbit_angle = 90

        planet = {
            class = "rl_habitable_normal"
            orbit_distance = 60
            size = { min = 6 max = 25 }
            orbit_angle = 45
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_e_1"
        size = 24
        orbit_distance = 40
        orbit_angle = 200

        planet = {
            class = pc_gas_giant
            size = 34
            orbit_distance = 40

        }

        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_angle = random
            orbit_distance = 30
            init_effect = {
                add_modifier = {
                    modifier = "terraforming_candidate"
                    days = -1
                }
            }
        }

        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_angle = random
            orbit_distance = 30

            moon = {
                class = "rl_no_atmosphere_planets"
                size = { min = 6 max = 25 }
                orbit_distance = 10
            }
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_f_1"
        size = 28
        orbit_distance = 20
        orbit_angle = 120

        planet = {
            class = "rl_habitable_normal"
            size = { min = 6 max = 25 }
            orbit_distance = 30
            orbit_angle = random
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_g_1"
        size = 20
        orbit_distance = 20
        orbit_angle = 120

        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 30
            orbit_angle = random
        }
        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 25
            orbit_angle = random
            init_effect = {
                add_modifier = {
                    modifier = "terraforming_candidate"
                    days = -1
                }
            }
        }
        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 20
            orbit_angle = random
        }
        planet = {
            class = pc_gas_giant
            size = 36
            orbit_distance = 25
            orbit_angle = random
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_h_1"
        size = 30
        orbit_distance = 60
        orbit_angle = 170

        planet = {
            class = "rl_habitable_normal"
            size = { min = 6 max = 25 }
            orbit_distance = 25
            orbit_angle = random
            modifiers = none
        }
        planet = {
            class = pc_gas_giant
            size = 40
            orbit_distance = 25
            orbit_angle = random
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_i_1"
        size = 20
        orbit_distance = 30
        orbit_angle = 50

        planet = {
            class = "rl_habitable_normal"
            size = { min = 6 max = 25 }
            orbit_distance = 40
            orbit_angle = random

            moon = {
                class = "rl_no_atmosphere_planets"
                size = { min = 6 max = 25 }
                orbit_distance = 15
                init_effect = {
                    add_modifier = {
                        modifier = "terraforming_candidate"
                        days = -1
                    }
                }
            }
        }
        planet = {
            class = pc_gas_giant
            size = 32
            orbit_distance = 40
            orbit_angle = random

            moon = {
                class = "rl_no_atmosphere_planets"
                size = { min = 6 max = 25 }
                orbit_distance = 25
            }
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_j_1"
        size = 30
        orbit_distance = 10
        orbit_angle = 40

        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 25
            orbit_angle = random
            modifiers = none
            init_effect = {
                add_modifier = {
                    modifier = "terraforming_candidate"
                    days = -1
                }
            }
        }
        planet = {
            class = pc_gas_giant
            size = 34
            orbit_distance = 25
            orbit_angle = random
        }
        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 30
            orbit_angle = random
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_k_1"
        size = 20
        orbit_distance = -60
        orbit_angle = 50

        planet = {
            class = pc_gas_giant
            size = 18
            orbit_distance = 30

            moon = {
                class = "rl_no_atmosphere_planets"
                size = { min = 6 max = 25 }
                orbit_distance = 15
                init_effect = {
                    add_modifier = {
                        modifier = "terraforming_candidate"
                        days = -1
                    }
                }
            }
        }
        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 35
            orbit_angle = random
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_l_1"
        size = 30
        orbit_distance = 30
        orbit_angle = 100

        planet = {
            class = "rl_habitable_normal"
            size = { min = 6 max = 25 }
            orbit_distance = 50
            orbit_angle = 60
            modifiers = none
        }
        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 20
            orbit_angle = 60
            modifiers = none
        }
    }
    init_effect = {
        save_global_event_target_as = spth_story_lunar_outpost_forever
        create_starbase = {
            size = "starbase_citadel"
            owner = event_target:spth_story_lunar_outpost_country
            module = "shipyard"
            module = "gun_battery"
            module = "gun_battery"
            module = "gun_battery"
            module = "gun_battery"
            module = "gun_battery"
            building = "toho_yards"
            building = "toho_yards"
            building = "colossus_yards"
            building = "titan_yards"
        }
    }
}
spth_story_lunar_minigalaxynary_rim_3 = {
    class = sc_spth_minigalaxynary
    usage = misc_system_init
    name = NAME_spth_story_lunar_outpost_rim_3
    max_instances = 1
    spawn_chance = 9999
    flags = {
        spth_story_crisis_outpost
        ag_no_jump_in_system
        cannot_be_hit_by_aow_starfall_spear
        kuat_cannot_be_hit_by_starkillerbase
        ag_no_star_killer_target_system
    }
    asteroid_belt = {
        type = rocky_asteroid_belt
        radius = 75
    }
    planet = {
        class = pc_a_star
        name = "NAME_spth_story_lunar_planet_a_2"
        orbit_distance = 0
        orbit_angle = 0
        size = 25

        planet = {
            class = pc_gas_giant
            size = 15
            orbit_distance = 25
            orbit_angle = random

            moon = {
                class = "rl_no_atmosphere_planets"
                size = { min = 6 max = 25 }
                orbit_distance = 10
                init_effect = {
                    add_modifier = {
                        modifier = "terraforming_candidate"
                        days = -1
                    }
                }
            }
        }

        planet = {
            class = pc_gaia
            orbit_angle = 160
            orbit_distance = 20
            size = { min = 20 max = 25 }
            has_ring = no
            modifiers = none
            deposit_blockers = none

            moon = {
                class = "rl_habitable_normal"
                size = { min = 6 max = 25 }
                orbit_distance = 15
            }
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_b_2"
        size = 20
        orbit_distance = 210
        orbit_angle = random

        planet = {
            class = "rl_habitable_normal"
            size = { min = 6 max = 25 }
            orbit_distance = 30
            orbit_angle = random
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_c_2"
        size = 40
        orbit_distance = -30
        orbit_angle = 120

        planet = {
            class = pc_gas_giant
            size = 30
            orbit_distance = 60

            moon = {
                class = "rl_no_atmosphere_planets"
                size = { min = 6 max = 25 }
                orbit_distance = 20
                init_effect = {
                    add_modifier = {
                        modifier = "terraforming_candidate"
                        days = -1
                    }
                }
            }
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_d_2"
        size = 36
        orbit_distance = 0
        orbit_angle = 90

        planet = {
            class = "rl_habitable_normal"
            orbit_distance = 60
            size = { min = 6 max = 25 }
            orbit_angle = 45
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_e_2"
        size = 24
        orbit_distance = 40
        orbit_angle = 200

        planet = {
            class = pc_gas_giant
            size = 34
            orbit_distance = 40

        }

        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_angle = random
            orbit_distance = 30
            init_effect = {
                add_modifier = {
                    modifier = "terraforming_candidate"
                    days = -1
                }
            }
        }

        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_angle = random
            orbit_distance = 30

            moon = {
                class = "rl_no_atmosphere_planets"
                size = { min = 6 max = 25 }
                orbit_distance = 10
            }
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_f_2"
        size = 28
        orbit_distance = 20
        orbit_angle = 120

        planet = {
            class = "rl_habitable_normal"
            size = { min = 6 max = 25 }
            orbit_distance = 30
            orbit_angle = random
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_g_2"
        size = 20
        orbit_distance = 20
        orbit_angle = 120

        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 30
            orbit_angle = random
        }
        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 25
            orbit_angle = random
            init_effect = {
                add_modifier = {
                    modifier = "terraforming_candidate"
                    days = -1
                }
            }
        }
        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 20
            orbit_angle = random
        }
        planet = {
            class = pc_gas_giant
            size = 36
            orbit_distance = 25
            orbit_angle = random
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_h_2"
        size = 30
        orbit_distance = 60
        orbit_angle = 170

        planet = {
            class = "rl_habitable_normal"
            size = { min = 6 max = 25 }
            orbit_distance = 25
            orbit_angle = random
            modifiers = none
        }
        planet = {
            class = pc_gas_giant
            size = 40
            orbit_distance = 25
            orbit_angle = random
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_i_2"
        size = 20
        orbit_distance = 30
        orbit_angle = 50

        planet = {
            class = "rl_habitable_normal"
            size = { min = 6 max = 25 }
            orbit_distance = 40
            orbit_angle = random

            moon = {
                class = "rl_no_atmosphere_planets"
                size = { min = 6 max = 25 }
                orbit_distance = 15
                init_effect = {
                    add_modifier = {
                        modifier = "terraforming_candidate"
                        days = -1
                    }
                }
            }
        }
        planet = {
            class = pc_gas_giant
            size = 32
            orbit_distance = 40
            orbit_angle = random

            moon = {
                class = "rl_no_atmosphere_planets"
                size = { min = 6 max = 25 }
                orbit_distance = 25
            }
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_j_2"
        size = 30
        orbit_distance = 10
        orbit_angle = 40

        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 25
            orbit_angle = random
            modifiers = none
            init_effect = {
                add_modifier = {
                    modifier = "terraforming_candidate"
                    days = -1
                }
            }
        }
        planet = {
            class = pc_gas_giant
            size = 34
            orbit_distance = 25
            orbit_angle = random
        }
        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 30
            orbit_angle = random
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_k_2"
        size = 20
        orbit_distance = -60
        orbit_angle = 50

        planet = {
            class = pc_gas_giant
            size = 18
            orbit_distance = 30

            moon = {
                class = "rl_no_atmosphere_planets"
                size = { min = 6 max = 25 }
                orbit_distance = 15
                init_effect = {
                    add_modifier = {
                        modifier = "terraforming_candidate"
                        days = -1
                    }
                }
            }
        }
        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 35
            orbit_angle = random
        }
    }
    planet = {
        class = star
        name = "NAME_spth_story_lunar_planet_l_2"
        size = 30
        orbit_distance = 30
        orbit_angle = 100

        planet = {
            class = "rl_habitable_normal"
            size = { min = 6 max = 25 }
            orbit_distance = 50
            orbit_angle = 60
            modifiers = none
        }
        planet = {
            class = "rl_no_atmosphere_planets"
            size = { min = 6 max = 25 }
            orbit_distance = 20
            orbit_angle = 60
            modifiers = none
        }
    }
    init_effect = {
        save_global_event_target_as = spth_story_lunar_outpost_dream
        create_starbase = {
            size = "starbase_citadel"
            owner = event_target:spth_story_lunar_outpost_country
            module = "shipyard"
            module = "gun_battery"
            module = "gun_battery"
            module = "gun_battery"
            module = "gun_battery"
            module = "gun_battery"
            building = "toho_yards"
            building = "toho_yards"
            building = "colossus_yards"
            building = "titan_yards"
        }
    }
}

spth_story_lunar_outpost_portal = {
    class = sc_spth_lunar_shrine
    usage = misc_system_init
    name = NAME_spth_lunar_outpost_shrine
    max_instances = 1
    spawn_chance = 9999
    flags = {
        spth_story_crisis_outpost
        cannot_be_hit_by_aow_starfall_spear
        kuat_cannot_be_hit_by_starkillerbase
        ag_no_star_killer_target_system
    }
    planet = {
        class = pc_rift_star
        size = 1
        orbit_distance = 0
        init_effect = { prevent_anomaly = yes set_planet_entity = { entity = spth_empty_planet } }
    }
    init_effect = {
        set_star_flag = spth_lunar_portal_endpoint
        save_global_event_target_as = spth_story_lunar_outpost_portal
        create_starbase = {
            size = "starbase_citadel"
            owner = event_target:spth_story_lunar_outpost_country
            module = "shipyard"
            module = "gun_battery"
            module = "gun_battery"
            module = "gun_battery"
            module = "gun_battery"
            module = "gun_battery"
            building = "toho_yards"
            building = "toho_yards"
            building = "colossus_yards"
            building = "titan_yards"
        }
        spawn_megastructure = {
            type = spth_lunar_outpost_portal
            owner = event_target:spth_story_lunar_outpost_country
            coords_from = system_star
            orbit_distance = 0
            orbit_angle = 0
        }
    }
}
