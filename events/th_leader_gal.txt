namespace = spth_leader_gal

# Yuyuko - first contact
# 无选项gal界面示例
# hiding button为点击skip按钮后跳过效果的选项
# skip按钮的效果通常为跳过本段gal对话，因此请将转跳事件设置为gal事件链中最后一个事件
# 变量设置详情请参与common/button effects中的文件
country_event = {
    id = spth_leader_gal.100
    title = NAME_spth_gal_yuyuko
    desc = spth_leader_gal.100.desc
    is_triggered_only = yes
    diplomatic = yes

    custom_gui = spth_gal_dialogue_window_no_option # 不带选项的gal界面

    immediate = {
        set_variable = { which = spth_gal_dialogue_bg value = 2 } # 背景变量设定，更改变量值以更改背景
        set_variable = { which = spth_gal_dialogue_yuyuko_portrait value = 1 } # 人物变量设定，更改变量值以更改立绘或差分
    }

    option = {
        # 点击转跳下一事件的按钮，必须为空名字，按钮大小覆盖整个界面
        custom_gui = spth_gal_dialogue_click_any_button
        name = BUTTON_TEXT_NULL
        hidden_effect = { country_event = { id = spth_leader_gal.101 } }
    }
    option = {
        # skip按钮，必须为空名字，点击转跳至事件链最后事件的选项，
        # 此选项隐藏在界面下，通过按esc或者伪装的关闭按钮触发预设选项选择
        custom_gui = spth_gal_hiding_button
        name = BUTTON_TEXT_NULL
        hidden_effect = { country_event = { id = spth_leader_gal.101 } }
        default_hide_option = yes
    }
}

# 有选项gal界面示例
# 可以设置skip按钮的效果，skip按钮的效果通常为跳过本段gal对话，因此请将转跳事件设置为gal事件链中最后一个事件
country_event = {
    id = spth_leader_gal.101
    title = NAME_spth_gal_yuyuko
    desc = spth_leader_gal.101.desc
    is_triggered_only = yes
    diplomatic = yes

    custom_gui = spth_gal_dialogue_window # 带选项的gal界面
    custom_gui_option = spth_gal_dialogue_button # 选项按钮样式

    immediate = {
        set_variable = { which = spth_gal_dialogue_bg value = 4 } # 背景变量设定，更改变量值以更改背景
        set_variable = { which = spth_gal_dialogue_yuyuko_portrait value = 1 } # 人物变量设定，更改变量值以更改立绘或差分
        set_country_flag = spth_gal_dialogue_charactor_lost_focus # 立绘切换至暗色状态，以表示并非立绘角色在发言的状态
        # set_country_flag = wg_dialogue_charactor_broken # 自定义的标识，切换至大破版立绘
    }

    option = {
        name = spth_leader_gal.101.a
    }
    option = {
        name = spth_leader_gal.101.b
    }
    option = {
        name = spth_leader_gal.101.c
    }
    option = {
        # skip按钮，必须为空名字，点击转跳至事件链最后事件的选项，
        # 此选项隐藏在界面下，通过按esc或者伪装的关闭按钮触发预设选项选择
        custom_gui = spth_gal_hiding_button # 此处设定的ui会覆盖在事件设置的custom_gui_option
        name = BUTTON_TEXT_NULL
        hidden_effect = { country_event = { id = spth_leader_gal.101 } }
        default_hide_option = yes
    }
}

# yuyuko - custom diplomacy
# This = target country (player)
# From = source country
country_event = {
    id = spth_leader_gal.110
    diplomatic = yes
    title = NAME_spth_gal_yuyuko
    is_triggered_only = yes
    trigger = {
        from = {
            is_country_type = spth_gal_yuyuko
        }
        exists = event_target:spth_gal_country_yuyuko
        has_communications = event_target:spth_gal_country_yuyuko
    }

    custom_gui = spth_gal_dialogue_window
    custom_gui_option = spth_gal_dialogue_button

    desc = {
        text = spth_leader_gal.110.desc.1
        trigger = {
            check_variable = { which = spth_gal_yuyuko_talk value = 0 }
        }
    }
    desc = {
        text = spth_leader_gal.110.desc.2
        trigger = {
            check_variable = { which = spth_gal_yuyuko_talk value = 1 }
        }
    }
    desc = {
        text = spth_leader_gal.110.desc.3
        trigger = {
            check_variable = { which = spth_gal_yuyuko_talk value = 2 }
        }
    }
    desc = {
        text = spth_leader_gal.110.desc.4
        trigger = {
            check_variable = { which = spth_gal_yuyuko_talk value = 3 }
        }
    }
    desc = {
        text = spth_leader_gal.110.desc.5
        trigger = {
            check_variable = { which = spth_gal_yuyuko_talk value = 4 }
        }
    }
    immediate = {
        set_variable = { which = spth_gal_dialogue_bg value = 6 }
        set_variable = { which = spth_gal_dialogue_yuyuko_portrait value = 1 }
        set_variable_to_random_value = { which = spth_gal_yuyuko_talk min = 0 max = 4 }
    }
    option = {
        name = spth_leader_gal.110.a
    }
    option = {
        name = spth_leader_gal.110.b
    }
    option = {
        name = spth_leader_gal.110.c
    }
    option = {
        name = spth_leader_gal.110.d
    }
    option = {
        custom_gui = spth_gal_hiding_button
        name = BUTTON_TEXT_NULL
        hidden_effect = { country_event = { id = spth_leader_gal.110 } }
        default_hide_option = yes
    }
}
